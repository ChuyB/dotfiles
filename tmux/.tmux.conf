set -g prefix C-b

set -g base-index 1
set -g pane-base-index 1
set -g history-limit 100000
set -g mouse on
set -g renumber-windows on
set -g set-clipboard on
set -g detach-on-destroy off

# Move between panes using Vim keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes with Shift + Vim keys
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Reload tmux config
unbind r
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# ----------- Colors -----------
set -g @color_blue "#61afef"
set -g @color_red "#ef596f"
set -g @color_gray "#495162"
set -g @color_white "#FFFFFF"
set -g @color_black "#000000"
set -g @color_bg "#282C34"
set -g @color_fg "#abb2bf"

# ----------- Status bar -----------
# Status positioning and style
set -g status-position top
set -g status-style "bg=default,fg=default"
set -g status-justify centre

# Status bar content
set -g status-left "#[bg=default,fg=default,bold]#{?client_prefix,, NORMAL }#[bg=#{@color_blue},fg=#{@color_black},bold]#{?client_prefix, PREFIX ,}#[bg=default,fg=default,bold]"
set -g status-right "#S"

# Window status formatting
set -g window-status-format "#[fg=#{@color_gray}]#[fg=#{@color_fg},bg=#{@color_gray}]#W #I#[fg=#{@color_gray},bg=default]"
set -g window-status-current-format "#[fg=#{@color_bg}]#[bg=#{@color_bg},fg=#{@color_white}]#W #{?window_zoomed_flag,󰊓 ,}#[fg=#{@color_white},bg=#{@color_red}] #I#[fg=#{@color_red},bg=default]"

# ----------- Sesh ----------
unbind T
bind T run-shell "sesh connect \"$(
  sesh list -i -t -c -z |
  fzf --tmux 80% --ansi --reverse --padding 1,2 \
    --border-label ' Sesh ' \
    --input-label ' Input ' \
    --prompt '⚡ ' \
    --color 'border:#{@color_gray},label:#{@color_fg}' \
    --color 'preview-border:#{@color_blue},preview-label:#{@color_white}' \
    --color 'list-border:#{@color_gray},list-label:#{@color_fg}' \
    --color 'input-border:#{@color_red},input-label:#{@color_white}' \
    --color 'header-border:#{@color_blue},header-label:#{@color_white}' \
    --preview-window 'right:55%' \
    --preview 'sesh preview {}'
)\""
