set -g prefix C-b

set -g base-index 1
set -g pane-base-index 1
set -g history-limit 100000
set -g mouse on
set -g renumber-windows on
set -g set-clipboard on
set -g detach-on-destroy off

# Move between panes using Vim keys
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes with Shift + Vim keys
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Reload tmux config
unbind r
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# ----------- Status bar -----------
# Status positioning and style
set -g status-position top
set -g status-style "bg=default,fg=default"
set -g status-justify centre

# Status bar content
set -g status-left "#[bg=default,fg=default,bold]#{?client_prefix,, NORMAL }#[bg=blue,fg=default,bold]#{?client_prefix, PREFIX ,}#[bg=default,fg=default,bold]"
set -g status-right "#S"

# Window status formatting
set -g window-status-format "#[fg=gray]#[fg=black,bg=gray]#W #I#[fg=gray,bg=default]"
set -g window-status-current-format "#[fg=black]#[bg=black,fg=default]#W #{?window_zoomed_flag,󰊓 ,}#[fg=default,bg=red] #I#[fg=red,bg=default]"

# ----------- Sesh ----------
bind l display-popup -w 80% -h 80% -b rounded -T '#[align=centre] Sessions ' -S 'fg=gray' \
  -E "sesh connect $( \
  sesh list -i -t -c -z |
  fzf --ansi --height=100% --reverse \
    --style full \
    --no-border \
    --input-label ' Input ' \
    --prompt '⚡ ' \
    --color 'input-border:red' \
    --color 'gutter:-1' \
    --color 'preview-scrollbar:green,preview-border:blue' \
    --preview-window 'right:55%' \
    --preview 'sesh preview {}'
)"

# ----------- Lazygit -----------
unbind g
bind g display-popup -w 90% -h 90% -b rounded -T '#[align=centre] Lazygit ' -E lazygit
